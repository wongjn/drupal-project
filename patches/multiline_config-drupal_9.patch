--- a/multiline_config.info.yml
+++ b/multiline_config.info.yml
@@ -3,10 +3,10 @@
 package: Configuration

 # core: 8.x
+core_version_requirement: ^8.7.10 || ^9
 type: module

 # Information added by Drupal.org packaging script on 2019-03-22
 version: '8.x-1.0'
-core: '8.x'
 project: 'multiline_config'
 datestamp: 1553258908
--- a/src/MultilineConfigFileStorageFactory.php
+++ b/src/MultilineConfigFileStorageFactory.php
@@ -2,6 +2,7 @@

 namespace Drupal\multiline_config;

+use Drupal\Core\Site\Settings;
 /**
  * Provides a custom factory for creating multiline config file storage objects.
  */
@@ -19,7 +20,7 @@ class MultilineConfigFileStorageFactory {
    * @throws \Exception
    */
   public static function getActive() {
-    return new MultilineConfigFileStorage(config_get_config_directory(CONFIG_ACTIVE_DIRECTORY));
+    return new MultilineConfigFileStorage(Settings::get('CONFIG_ACTIVE_DIRECTORY'));
   }

   /**
@@ -31,7 +32,7 @@ class MultilineConfigFileStorageFactory {
    * @throws \Exception
    */
   public static function getSync() {
-    return new MultilineConfigFileStorage(config_get_config_directory(CONFIG_SYNC_DIRECTORY));
+    return new MultilineConfigFileStorage(Settings::get('config_sync_directory'));
   }

 }
--- a/src/MultilineConfigServiceProvider.php
+++ b/src/MultilineConfigServiceProvider.php
@@ -14,9 +14,7 @@ class MultilineConfigServiceProvider extends ServiceProviderBase {
    * {@inheritdoc}
    */
   public function alter(ContainerBuilder $container) {
-    /* @deprecated in Drupal 8.0.x and will be removed before 9.0.0. */
-    // Change to config.storage.sync when config.storage.staging is removed.
-    if ($config_storage = $container->getDefinition('config.storage.staging')) {
+    if ($config_storage = $container->findDefinition('config.storage.sync')) {
       $config_storage->setClass('Drupal\multiline_config\MultilineConfigFileStorage');
       $config_storage->setFactory('Drupal\multiline_config\MultilineConfigFileStorageFactory::getSync');
     }
